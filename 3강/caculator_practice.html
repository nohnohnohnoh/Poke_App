<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title>계산기</title>
  <style>
    * {
      box-sizing: border-box;
    }
    #result {
      width: 180px;
      height: 50px;
      margin: 5px;
      text-align: right;
    }
    #operator {
      width: 50px;
      height: 50px;
      margin: 5px;
      text-align: center;
    }
    button {
      width: 50px;
      height: 50px;
      margin: 5px;
    }
  </style>
</head>

<!--계산기버튼구현-->
<body>
  <input readonly id="operator" />
  <input readonly type="number" id="result" />
  <div class="row">
    <button id="num-7">7</button>
    <button id="num-8">8</button>
    <button id="num-9">9</button>
    <button id="plus">+</button>
  </div>
  <div class="row">
    <button id="num-4">4</button>
    <button id="num-5">5</button>
    <button id="num-6">6</button>
    <button id="minus">-</button>
  </div>
  <div class="row">
    <button id="num-1">1</button>
    <button id="num-2">2</button>
    <button id="num-3">3</button>
    <button id="divide">/</button>
  </div>
  <div class="row">
    <button id="clear">C</button>
    <button id="num-0">0</button>
    <button id="calculate">=</button>
    <button id="multiply">x</button>
  </div>
  <script>
    let numOne = "";
    let operator = "";
    let numTwo = "";
    const $operator = document.querySelector("#operator");
    const $result = document.querySelector("#result");

    const onClickNumber = (event) => {
      if (operator) {
        if (!numTwo) {
          $result.value = "";
        }
        nuwTwo += event.target.textContent;
      } else {
        numOne += event.target.textContent;
      }
      $result.value += event.target.textContent;
    }; // 중첩 if문을 줄이는 것이 좋다 중첩 조건문은 좋지 않은 코드

    // 고차함수로 중복 코드 줄이기.
    // const onClickNumber = (number) => () => {
    //   if (operator) {
    //     nuwTwo += number;
    //   } else {
    //     numOne += number;
    //   }
    // };
    // 위으 함수 모양으로 함수를 실행하면 함수가 return 되게끔 함수식이 나오게끔 해준다.
    // console.log("test", onClickNumber(1));

    // const onClickNumber = () => {
    //   if (operator) {
    //     nuwTwo += 1;
    //   } else {
    //     numOne += 1;
    //   }
    // };
    // 이런식의 모양이면 변수에 함수를 담은거라고 생각하는게 빠를 것 같다.

    console.log("test", onClickNumber);

    document.querySelector("#num-0").addEventListener(
      "click",
      //   if (operator) {
      //     nuwTwo += "0";
      //   } else {
      //     numOne += "0";
      //   } // 중복 된 코드가 많다. 중복이 없는 코드를 구현해야한다.
      onClickNumber("1")

      // 실제로 두번째 자리에는 함수 호춯식이 와야 하지만 위에 코드는 undefined return값이 나와서 자리에 맞지않는다.
      // 함수식에 모양이 와야한다. 그 와 동시에 매개변수에 모양이 와야한다. 고차 함수로 매개변수에 모양이 되어있는 함수에 고차함수를 해
      // 함수를 부른다.
    );
    document
      .querySelector("#num-1")
      .addEventListener("click", onClickNumber("1"));
    document.querySelector("#num-2").addEventListener("click", () => {
      if (operator) {
        nuwTwo += "0";
      } else {
        numOne += "0";
      }
    });
    document.querySelector("#num-3").addEventListener("click", () => {
      if (operator) {
        nuwTwo += "0";
      } else {
        numOne += "0";
      }
    });
    document.querySelector("#num-4").addEventListener("click", () => {
      if (operator) {
        nuwTwo += "0";
      } else {
        numOne += "0";
      }
    });
    document.querySelector("#num-5").addEventListener("click", () => {
      if (operator) {
        nuwTwo += "0";
      } else {
        numOne += "0";
      }
    });
    document.querySelector("#num-6").addEventListener("click", () => {
      if (operator) {
        nuwTwo += "0";
      } else {
        numOne += "0";
      }
    });
    document.querySelector("#num-7").addEventListener("click", () => {
      if (operator) {
        nuwTwo += "0";
      } else {
        numOne += "0";
      }
    });
    document.querySelector("#num-8").addEventListener("click", () => {
      if (operator) {
        nuwTwo += "0";
      } else {
        numOne += "0";
      }
    });
    document.querySelector("#num-9").addEventListener("click", () => {
      if (operator) {
        nuwTwo += "0";
      } else {
        numOne += "0";
      }
    });
    const onClickOperator = (op) => () => {
      if (numOne) {
        operator = op;
        $operator.value = op;
      } else {
        alert("숫자를 먼저 입력하세요.");
      }
    };

    document
      .querySelector("#plus")
      .addEventListener("click", onClickOperator("+"));
    document
      .querySelector("#minus")
      .addEventListener("click", onClickOperator("-"));
    document
      .querySelector("#divide")
      .addEventListener("click", onClickOperator("*"));
    document.querySelector("#multiply").addEventListener("click", () => {});
    document.querySelector("#calculate").addEventListener("click", () => {});
    document.querySelector("#clear").addEventListener("click", () => {});
    if (numTwo) {
      switch (operator) {
        case "+":
          $result.value = parseInt(numOne) + parseInt(numTwo);
          break;
        case "-":
          $result.value = numOne - numTwo;
          break;
        case "*":
          $result.value = numOne * numTwo;
          break;
        case "/":
          $result.value = numOne / numTwo;
          break;
        default:
          break;
      }
    } else {
      alert("숫자를 먼저 입력하세요.");
    }
    if (numTwo) {
      if (operator) {
        if (operator === "+")
          return ($result.value = parseInt(numOne) + parseInt(numTwo));
        else if (operator === "-") return ($result.value = numOne - numTwo);
        else if (operator === "*") return ($result.value = numOne * numTwo);
        else if (operator === "/") return ($result.value = numOne / numTwo);
      }
    } else {
      alert("숫자를 먼저 입력하세요");
    }
  </script>
</body>
